# Skylighting JSON Themes

    pandoc v2.0.3

Resources for customizing syntax highlighting styles via KDE theme files.

-----

**Table of Contents**

<!-- MarkdownTOC autolink="true" bracket="round" autoanchor="false" lowercase="true" lowercase_only_ascii="true" uri_encoding="true" -->

- [Files List](#files-list)
- [Introduction](#introduction)
- [The Default Theme](#the-default-theme)
    - [Default Theme’s Data Excess](#default-theme%E2%80%99s-data-excess)
- [Theme Boilerplate](#theme-boilerplate)
    - [Usage Guidelines](#usage-guidelines)
- [References](#references)
    - [Full List of Token Types](#full-list-of-token-types)
    - [Token-Types to CSS-Classes](#token-types-to-css-classes)
    - [CSS-Classes to Token-Types](#css-classes-to-token-types)

<!-- /MarkdownTOC -->

-----

# Files List

  - [`boilerplate.theme`](./boilerplate.theme) — Highlight-style boilerplate (public domain).
  - [`UNLICENSE`](./UNLICENSE) — Public domain declaration for `boilerplate.theme`

# Introduction

Pandoc v2 introduced a new feature which allows to dynamically load a custom syntax highlighting theme file (JSON) via the `--highlight-style=FILE` option:

> Instead of a *STYLE* name, a JSON file with extension `.theme` may be supplied. This will be parsed as a KDE syntax highlighting theme and (if valid) used as the highlighting style. To see a sample theme that can be modified, `pandoc --print-default-data-file default.theme`.

Theme files are format-agnostic and they will work with all output formats that support syntax highlighting.

# The Default Theme

  - <https://github.com/jgm/pandoc/blob/master/data/default.theme>

The default theme can be viewed at the above link, or generated by invoking pandoc with:

    pandoc --print-default-data-file default.theme

The generated file can be used as a reference to build custom themes.

## Default Theme’s Data Excess

The problem with the `default.theme` file is that because it’s a KDE syntax highlighting theme it contain many keys which are not actually used by pandoc for highligthing. (See [Issue \#4096](https://github.com/jgm/pandoc/issues/4096))

For example, every member of `"text-styles"` has a `"selected-text-color"` entry, which doesn’t affect the ouput of pandoc highlighting:

``` json
    },
    "text-styles": {
        "Normal" : {
            "text-color" : "#1f1c1b",
            "selected-text-color" : "#ffffff",
            "bold" : false,
            "italic" : false,
            "underline" : false,
            "strike-through" : false
        },
        "Keyword" : {
            "text-color" : "#1f1c1b",
            "selected-text-color" : "#ffffff",
            "bold" : true
        },
```

Also, most of the name/value pairs in `"editor-colors"` are specific to the Kate Editor, and will not affect pandoc syntax-highlighting:

``` json
    "editor-colors": {
        "background-color" : "#ffffff",
        "code-folding" : "#94caef",
        "bracket-matching" : "#ffff00",
        "current-line" : "#f8f7f6",
        "icon-border" : "#f0f0f0",
        "indentation-line" : "#d2d2d2",
        "line-numbers" : "#a0a0a0",
        "current-line-number" : "#1e1e1e",
        "mark-bookmark" : "#0000ff",
        "mark-breakpoint-active" : "#ff0000",
        "mark-breakpoint-reached" : "#ffff00",
        "mark-breakpoint-disabled" : "#ff00ff",
        "mark-execution" : "#a0a0a4",
        "mark-warning" : "#00ff00",
        "mark-error" : "#ff0000",
        "modified-lines" : "#fdbc4b",
        "replace-highlight" : "#00ff00",
        "saved-lines" : "#2ecc71",
        "search-highlight" : "#ffff00",
        "selection" : "#94caef",
        "separator" : "#898887",
        "spell-checking" : "#bf0303",
        "tab-marker" : "#d2d2d2",
        "template-background" : "#d6d2d0",
        "template-placeholder" : "#baf8ce",
        "template-focused-placeholder" : "#76da98",
        "template-read-only-placeholder" : "#f6e6e6",
        "word-wrap-marker" : "#ededed"
    }
}
```

# Theme Boilerplate

  - [`boilerplate.theme`](./boilerplate.theme)

For the above mentioned reasons, I’ve created a [theme boilerplate file](././boilerplate.theme), containing only entries that are significant for pandoc usage (the boilerplate is released into the [Public Domain](./UNLICENSE)).

This boilerplate is a more manageable template for building a custom theme.

> **NOTE** — I haven’t been able to find much documentation on how pandoc/skylighting handle themes; so I’ve been relying on testing with theme files and on peeking at skylighting sourcecode.

## Usage Guidelines

All the members of `"text-styles"` represent [skylighting token types](#full-list-of-token-types), and share some common name/value pairs:

``` json
    "text-styles": {
        "Normal" : {
            "text-color" : "#ffffff",
            "background-color" : "#333333",
            "bold" : true,
            "italic" : true,
            "underline" : true,
            "strike-through" : true
        },
```

… where `"Normal"` correspond to the “Normal” token type, and so on.

I’ve filled all text-styles with the same data set, which is usually more than you’ll ever need. Dummy color values are provided as placeholder. You should edit color values to your needs, and remove any unwanted attributes, including boolean “`false`” values (you can delete the whole entry, as `false` is the defaul value of missing entries).

The idea is to avoid copy-&-paste operations: everything you might need for any text-style is there, remove what you don’t need. It seemed better to me than having a single entry with the data, and then have to copy and paste over what was needed.

For example, if you wanted Constants to be shown in red (`#ff0000`) and **bold**, you’d only keep:

``` json
        "Constant" : {
            "text-color" : "#ff0000",
            "bold" : true,
        },
```

> **NOTE** — Color definitions must be hex value strings, in the “`#00ff00`” format — color names like `"red"` are not allowed, nor are RGB color definitions.

### Editor-Colors Section

By lookin at [skylighting source code](https://github.com/jgm/skylighting/blob/0.4.4/src/Skylighting/Types.hs#L339) (`v0.4.4`), it seems that these are the only meaningful entries in `"editor-colors"`:

``` json
    "editor-colors": {
        "background-color" : "#000000",
        "line-numbers" : "#dddddd"
    }
}
```

Here is a descriptions of what is affected by members of `"editor-colors"`:

    "background-color" --- Codeblock and line numbers background color.
    "line-numbers" --- Line numbers color (unless "Normal" > "text-color" is defined)

The color of `"line-numbers"` will only be displayed if no `"text-color"` was provided for the `"Normal"` text-style, otherwise the latter will override the former\!

# References

  - <https://github.com/jgm/skylighting>

## Full List of Token Types

The list of skylighting supported token types can be found in the “`Types.hs`” source file:

  - [github.com/jgm/skylighting/blob/master/src/Skylighting/Types.hs](https://github.com/jgm/skylighting/blob/master/src/Skylighting/Types.hs#L170)

Their HTML class-names equivalents can be found in the “`HTML.hs`” source file:

  - [github.com/jgm/skylighting/blob/master/src/Skylighting/Format/HTML.hs](https://github.com/jgm/skylighting/blob/master/src/Skylighting/Format/HTML.hs#L16)

## Token-Types to CSS-Classes

Here is a reference table listing all the token types and their corresponding CSS class-names:

| TOKEN          | CLASS |
| -------------- | ----- |
| Alert          | `.al` |
| Annotation     | `.an` |
| Attribute      | `.at` |
| BaseN          | `.bn` |
| BuiltIn        | `.bu` |
| Char           | `.ch` |
| Comment        | `.co` |
| CommentVar     | `.cv` |
| Constant       | `.cn` |
| ControlFlow    | `.cf` |
| DataType       | `.dt` |
| DecVal         | `.dv` |
| Documentation  | `.do` |
| Error          | `.er` |
| Extension      | `.ex` |
| Float          | `.fl` |
| Function       | `.fu` |
| Import         | `.im` |
| Information    | `.in` |
| Keyword        | `.kw` |
| Normal         |       |
| Operator       | `.op` |
| Other          | `.ot` |
| Preprocessor   | `.pp` |
| RegionMarker   | `.re` |
| SpecialChar    | `.sc` |
| SpecialString  | `.ss` |
| String         | `.st` |
| Variable       | `.va` |
| VerbatimString | `.vs` |
| Warning        | `.wa` |

## CSS-Classes to Token-Types

Here is the same table as above, but ordered by CSS class-names:

| CLASS | TOKEN          |
| ----- | -------------- |
|       | Normal         |
| `.al` | Alert          |
| `.an` | Annotation     |
| `.at` | Attribute      |
| `.bn` | BaseN          |
| `.bu` | BuiltIn        |
| `.cf` | ControlFlow    |
| `.ch` | Char           |
| `.cn` | Constant       |
| `.co` | Comment        |
| `.cv` | CommentVar     |
| `.do` | Documentation  |
| `.dt` | DataType       |
| `.dv` | DecVal         |
| `.er` | Error          |
| `.ex` | Extension      |
| `.fl` | Float          |
| `.fu` | Function       |
| `.im` | Import         |
| `.in` | Information    |
| `.kw` | Keyword        |
| `.op` | Operator       |
| `.ot` | Other          |
| `.pp` | Preprocessor   |
| `.re` | RegionMarker   |
| `.sc` | SpecialChar    |
| `.ss` | SpecialString  |
| `.st` | String         |
| `.va` | Variable       |
| `.vs` | VerbatimString |
| `.wa` | Warning        |
